
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Linux Sysadmin Blog</title>
  <meta name="author" content="Promet OPS Team">

  
  <meta name="description" content="As I mentioned in yesterday&#8217;s post, we are giving AdBard another try. We promise we will spend all proceeds generated from the advertising for &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://linuxsysadminblog.com/blog/page/11/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Linux Sysadmin Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!-- Google Form for Contact Page -->
<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    // Avoid conflict with ender.js.
jQuery.noConflict();
</script>
<!-- jQuery Form Plugin -->
<script src="http://malsup.github.com/jquery.form.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script> 
<script src="/javascripts/google_form.js"></script>
<!-- Google Form for Contact Page End here -->


  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-120251-38']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Linux Sysadmin Blog</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:linuxsysadminblog.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/our-team">Our Team</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/about">About</a></li>
  <li><a href="/blog/contact">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/05/sys-admin-beer-money-free-software-foundation-ads/">Sys Admin Beer Money - Free Software Foundation Ads</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/andrew-kucharski.html">Andrew Kucharski</a></span></span>

 - 








  


<time datetime="2009-05-12T18:07:30+08:00" pubdate data-updated="true">May 12<span>th</span>, 2009</time>
        
         | <a href="/2009/05/sys-admin-beer-money-free-software-foundation-ads/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>As I mentioned in yesterday&#8217;s post, we are giving AdBard another try.  We promise we will spend all proceeds generated from the advertising for free beer for the system admins who tirelessly work to maintain the site and blog about their linux system admin experiences.</p>

<p>Here is the first Ad.  Click on it.  We get more beer if you do.  And its for <a href="http://www.fsf.org/">Free Software Foundation</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/05/install-imagemagick-and-imagick-on-cpanel-server/">Install ImageMagick and Imagick on Cpanel Server</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/gerold-mercadero.html">Gerold Mercadero</a></span></span>

 - 








  


<time datetime="2009-05-12T11:51:25+08:00" pubdate data-updated="true">May 12<span>th</span>, 2009</time>
        
         | <a href="/2009/05/install-imagemagick-and-imagick-on-cpanel-server/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here&#8217;s a quick how-to for installing <strong><a href="http://www.imagemagick.org/script/index.php">ImageMagick</a></strong> and <strong><a href="http://pecl.php.net/package/imagick">Imagick</a></strong> on Cpanel server.  I will cover only the procedure using the Cpanel built-in scripts, although you can also install it the usual way (rpm or source install).  <a href="http://www.imagemagick.org/script/index.php">ImageMagick</a>  is the application for working with images while the <a href="http://pecl.php.net/package/imagick">Imagick</a> is a PHP extention to modify/create images using the ImageMagick API.</p>

<p><strong>Installation:</strong></p>

<p><strong>ImageMagick</strong></p>

<p>Check first if it&#8217;s installed:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/scripts/checkimagemagick</span></code></pre></td></tr></table></div></figure>


<p>Proceed with Installation:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/scripts/installimagemagick</span></code></pre></td></tr></table></div></figure>


<p>Installation will take a couple minutes as it will install other packages needed by ImageMagick.  After the installation, you can check your ImageMagick version:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/usr/bin/convert --version</span></code></pre></td></tr></table></div></figure>


<p>It will give you something like:</p>

<blockquote><p>Version: ImageMagick 6.4.8 2009-05-11 Q16 OpenMP http://www.imagemagick.org
  Copyright: Copyright (C) 1999-2009 ImageMagick Studio LLC</p></blockquote>

<p><strong>Imagick</strong></p>

<p>Go to <code>WHM -&gt; Software -&gt; Module Installers -&gt; PHP Pecl (manage)</code>. On the box below <code>Install a PHP Pecl</code> enter <code>imagick</code> and click <code>Install Now</code> button - that&#8217;s all.</p>

<p>Restart Apache and check your <code>phpinfo</code> page to see the details of Imagick and ImageMagick as well.  See linked images for reference:  <a href="http://linuxsysadminblog.com/images/2009/05/install.jpg">image1</a>, <a href="http://linuxsysadminblog.com/images/2009/05/installed.jpg">image2</a>.</p>

<p><strong>Uninstall:</strong></p>

<p>If you decide to uninstall it&#8217;s as easy as the installation process:</p>

<p>ImageMagick:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/scripts/cleanimagemagick</span></code></pre></td></tr></table></div></figure>


<p>Imagick:  <code>WHM -&gt; Software -&gt; Module Installers -&gt; PHP Pecl (manage)</code>.  Click on <code>Uninstall</code> button for Imagick.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/05/adbard-comes-back-to-life/">AdBard Comes Back to Life</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/andrew-kucharski.html">Andrew Kucharski</a></span></span>

 - 








  


<time datetime="2009-05-11T09:21:03+08:00" pubdate data-updated="true">May 11<span>th</span>, 2009</time>
        
         | <a href="/2009/05/adbard-comes-back-to-life/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When AdBard went off the air earlier this year, I wasn&#8217;t so nice to it in my post, so to try to make it up, here is some free publicity for this <a href="http://adbard.net/join">FLOSS ad network</a>.</p>

<p>Good Luck!</p>

<p>Here is an excerpt from their latest newsletter to previous participants:</p>

<blockquote><p>The new network has been redesigned under the guidance of the Free Software Foundation, offering an even greater focus on the importance of Free/Libre and Open Source Software.  The FSF will continue to take an advisory role in the network.
 * Based on this guidance from the FSF, to participate in the Ad Bard Network:
 * Your website must in some way pertain to FLOSS.  Our network is dedicated only to websites that are FLOSS-relevant and advertisers that are FLOSS-appropriate.
 1. Your website must exclusively display Ad Bard advertisements.  We no longer allow other advertisements to be displayed along side Ad Bard advertisements.  This is to ensure that there are no FLOSS-inappropriate advertisements displayed on your web pages, and is necessary for some organizations to be able to link to your website.
 2. All members will have a chance to vote for or against advertisements for 36 hours after the order is placed.  At least 50% of the received votes must be positive for the advertisement to be accepted.  Higher traffic websites will have a proportionally greater vote than lower traffic websites.
 * Only one Ad Bard Network advertisement can be displayed on a page at a time.  Ad Bard Network advertisements will be comprised of both 1 image (120 pixels wide by 90 pixels tall) and 80 characters of text.
 * Instead of trying to sell many inexpensive advertisements, the network will only sell 25 standard advertisements each month.  The network will also sell around 5 exclusive daily advertisements each month.  Exclusive daily advertisements will be displayed on all pages of all member websites for an entire 24 hour period.  Standard monthly advertisements will be displayed in rotation on all websites on all days for which no exclusive daily advertisement has been sold.
 * Members will earn a % of the profits made from selling advertisements on the network.  Actual member earnings will be calculated monthly based on how many advertisements were displayed on your website and how many times the advertisements were clicked on your website.  As the network grows, the cost of advertising on the network will also grow, and thus so will potential member earnings.  The actual algorithms used will be publicly available for feedback and suggestions, and will evolve as necessary to ensure that payments are fairly distributed.</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/05/csf-not-detecting-pop3-login-failures/">CSF Not Detecting POP3 Login Failures</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/gerold-mercadero.html">Gerold Mercadero</a></span></span>

 - 








  


<time datetime="2009-05-07T04:22:56+08:00" pubdate data-updated="true">May 7<span>th</span>, 2009</time>
        
         | <a href="/2009/05/csf-not-detecting-pop3-login-failures/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is the second time that <a href="http://configserver.com/cp/csf.html">CSF</a> on our Cpanel server is not detecting POP3 login failures from a dictionary attack.  The IP address was added on the ip deny list but still it was able to attempt to login on POP3.  We have our LF_POP3D set to 20 and LF_POP3D_PERM to 1 to block the ip permanently after 20 tries.  I can&#8217;t remember the CSF version when this first happened, but this time we&#8217;re running CSF version 4.65 and the latest is 4.67.  Of course, the usual way for me to fix the issue is to upgrade to the latest version.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/05/dv-camera-computer-vlan-dvgrab-cheap-video-surveillance/">Dv Camera + Computer + Vlan + Dvgrab = Cheap Video Surveillance</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/max-veprinsky.html">Max Veprinsky</a></span></span>

 - 








  


<time datetime="2009-05-06T13:21:04+08:00" pubdate data-updated="true">May 6<span>th</span>, 2009</time>
        
         | <a href="/2009/05/dv-camera-computer-vlan-dvgrab-cheap-video-surveillance/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In the day and age of high definition many are upgrading their video recording gear to the latest harddrive or flash based hi def video cameras. Unlike auto dealerships consumer electronics retailers don&#8217;t offer trade in options for your old stuff.  In the green / renewable mindset we can put these no longer used video cameras to good use as video surveillance devices perfect for keeping an eye on your own or others property.</p>

<p>On the hardware side you need a <a href="http://linuxsysadminblog.com/?attachment_id=596">DV camera</a> with firewire port (IEEE 1394), firewire port equipped Pentium 4 or equivalent pc or laptop with loaded with Fedora 9 or 10 and a  firewire cable to connect camera to the computer. For software we will only need <a href="http://freshmeat.net/projects/dvgrab/">dvgrab</a> and <a href="http://www.videolan.org">VLC</a></p>

<p>Install dvgrab from Fedora update repo:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum install dvgrab</span></code></pre></td></tr></table></div></figure>


<p>Install vlc from rpmfusion repo:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo rpm -ivh http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-stable.noarch.rpm
</span><span class='line'>sudo yum install vlc</span></code></pre></td></tr></table></div></figure>


<p>Set DV camera audio to 16bit (default is 12 bit) to avoid garbled audio.</p>

<p><a href="http://linuxsysadminblog.com/2009/05/dv-camera-computer-vlan-dvgrab-cheap-video-surveillance/audio16bit/"><img src="http://linuxsysadminblog.com/images/2009/05/audio16bit.jpg" alt="audio16bit" /></a></p>

<p>Turn on and connect video camera to computer and you should see something like this in /var/log/dmesg:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>firewire_core: created device fw1: GUID 0800460102721e20, S100</span></code></pre></td></tr></table></div></figure>


<p>To test that we are able to grab video/audio from camera and display in VLC player pipe output of dvgrab into vlc.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo dvgrab - -noavc -nostop | vlc - --no-sub-autodetect-file :demux=rawdv</span></code></pre></td></tr></table></div></figure>


<p>After issuing this command you should see a 720x480 video feed with 16bit 48000Hz audio stream in vlc on your desktop</p>

<p><a href="http://linuxsysadminblog.com/2009/05/dv-camera-computer-vlan-dvgrab-cheap-video-surveillance/vlcwindow1/"><img src="http://linuxsysadminblog.com/images/2009/05/vlcwindow1.png" alt="vlcwindow1" /></a></p>

<p>Now we setup vlc as a streaming server so that we can view the video/audio when away. Streaming a 720x480 video stream is a bit overkill as the video quality on the DV camera is pretty good when vlc streams video at lower resolutions like 320x240, I also reduce the audio quality to save on bandwidth. Here I used &#8220;cvlc&#8221; or command vlc to avoid opening a vlc window and &#8220;&amp;&#8221; to put process into background.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo dvgrab - -noavc -nostop | cvlc - --no-sub-autodetect-file :demux=rawdv --sout '#transcode{vcodec=mp4v,vb=600,acodec=mp3,ab=56,scale=1,width=320,height=240,channels=2}:duplicate{dst=std{access=http,mux=ts,dst=192.168.1.102:3323}}' & </span></code></pre></td></tr></table></div></figure>


<p>To view the feed locally via vlc open a http network location on ip and port you specified in the <code>dst=</code> section of the command above.</p>

<p><a href="http://linuxsysadminblog.com/2009/05/dv-camera-computer-vlan-dvgrab-cheap-video-surveillance/vlcopen/"><img src="http://linuxsysadminblog.com/images/2009/05/vlcopen.png" alt="vlcopen" /></a></p>

<p>To view your feed from the Internet you will need to either configure vlc to stream on an outside interface or configure port forwarding.</p>

<p><a href="http://linuxsysadminblog.com/2009/05/dv-camera-computer-vlan-dvgrab-cheap-video-surveillance/ddwrt/"><img src="http://linuxsysadminblog.com/images/2009/05/ddwrt.png" alt="ddwrt" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/swine-flue-or-h1n1/">Swine Flue, or H1N1</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/andrew-kucharski.html">Andrew Kucharski</a></span></span>

 - 








  


<time datetime="2009-04-30T23:03:50+08:00" pubdate data-updated="true">Apr 30<span>th</span>, 2009</time>
        
         | <a href="/2009/04/swine-flue-or-h1n1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you want to check to see if you may have already contracted the virus and want to know what to do in case you have, go here:</p>

<p><a href="http://doihaveswineflu.org/">http://doihaveswineflu.org/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/the-great-cloud-shootout-at-mysql-conference/">The Great Cloud Shootout at MySQL Conference</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/andrew-kucharski.html">Andrew Kucharski</a></span></span>

 - 








  


<time datetime="2009-04-30T21:29:38+08:00" pubdate data-updated="true">Apr 30<span>th</span>, 2009</time>
        
         | <a href="/2009/04/the-great-cloud-shootout-at-mysql-conference/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>MySQL conference notes on cloud computing shoot out text summary atranscript</p>

<blockquote><p>Lew Tucker, Cloud CTO, sun
Monty Taylor, MySQL Drissel Geek, Sun
Jeremy Zawodny, MySQL hacker, craigslist
Chander Kant, CEO, Zmanda
Thorsten von Ficon, CTO, Rightscale
Prashant Malik, Cassandra Dude, Facebook
Mike Culver, Evangerlist, Amazon Web Services</p></blockquote>

<p>Some interesting subjects touched upon were:</p>

<p><strong>elasticity</strong> - allowing even a small company to shoot for the moon without shooting itself in the foot
like utilities, much like electricity - you dont think about the electricyt company running out of electricity
new way of packaging the technology with a pay as you go model, way to provision your application</p>

<ul>
<li>Different Types of Clouds</li>
<li>Layers of Clouds</li>
<li>Amazon like</li>
<li>Google</li>
<li><p>SaaS</p></li>
<li><p>Who is the cloud for?</p></li>
<li>even ERP in the cloud?</li>
</ul>


<p>How would an existing application benefit from the cloud?
* scaling an application
* leverage the collective scalability of the cloud
* forklifting an application out of datacenter or in house colo
* scalability testing?</p>

<p>Cloud adoption barriers
* privacy
* performance
* network latency
* trust and privacy
* mindset on owning your own datacenter
* competition (lack of)</p>

<p>What applications fit best into the cloud
* own</p>

<p>Business Opportunities?
* dev pay - the customer signs up for SaaS or Software as an annuity
* learn how to do performance tuning and optimization and do that for cloud infrastructures (41:50)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/acrobat-reader-javascript-exploit-hits-linux/">Acrobat Reader Javascript Exploit Hits Linux</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/max-veprinsky.html">Max Veprinsky</a></span></span>

 - 








  


<time datetime="2009-04-28T17:57:50+08:00" pubdate data-updated="true">Apr 28<span>th</span>, 2009</time>
        
         | <a href="/2009/04/acrobat-reader-javascript-exploit-hits-linux/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Adobe is starting to look more and more like Microsft these days. Both companies offer popular products used at home and in the enterprise, both offer multi-platform versions. Adobe does show much more love for Linux then Microsoft will likely ever will. While this isnt the <a href="http://www.adobe.com/support/security/advisories/apsa08-01.html">first time</a> PDF based exploits have been discovered, the new exploit first reported by <a href="http://www.securityfocus.com/bid/34736/info">Security Focus</a> is a biggie mainly because it affects all platforms of Adobe Reader 8.1.4/9.1 This exploit is considered <a href="http://secunia.com/advisories/3492">highly critical</a> by Secunia, a security firm.</p>

<p>If there is one posivite to come from this is that updating your anti-virus definitons isnt required. Simply <a href="http://blogs.adobe.com/psirt/">disable</a> Acrobat Javascript by following these simple directions.</p>

<ol>
<li>Launch Acrobat or Adobe Reader.</li>
<li>Select Edit>Preferences</li>
<li>Select the JavaScript Category</li>
<li>Uncheck the ‘Enable Acrobat JavaScript’ option</li>
<li>Click OK</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/lsi-aquires-3warec2ae-from-amcc/">LSI Aquires 3ware® From AMCC</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/max-veprinsky.html">Max Veprinsky</a></span></span>

 - 








  


<time datetime="2009-04-24T12:50:54+08:00" pubdate data-updated="true">Apr 24<span>th</span>, 2009</time>
        
         | <a href="/2009/04/lsi-aquires-3warec2ae-from-amcc/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In an <a href="http://now.eloqua.com/e/es.aspx?s=793&amp;e=A3B04CDAD711452AAE30C28330C367B3&amp;elq=F3E2E27EAC1A44EAAF8765C376493879">accouncement</a>  made yesterday LSI Corporation stated that it had entered into a definitive agreement with Applied Micro Circuits Corporation (AMCC) to acquire the assets and associated intellectual property of the 3ware® RAID adapter business. It has been about 5 years since AMCC aquired 3Ware Inc for roughly 150 millions dollars in cash and yesterday they sold 3Ware for about 20 million cash.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/monitoring-drupal-sites-with-nagios/">Monitoring Drupal Sites With Nagios</a></h1>
    
    
      <p class="meta">
        
  


<span class="byline author vcard">Posted by <span class="fn"><a href="/blog/our-team/gerold-mercadero.html">Gerold Mercadero</a></span></span>

 - 








  


<time datetime="2009-04-23T04:22:31+08:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2009</time>
        
         | <a href="/2009/04/monitoring-drupal-sites-with-nagios/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There is a <a href="http://drupal.org/project/nagios"><strong>module</strong></a> released for monitoring <a href="http://drupal.org/">Drupal</a> sites with <a href="http://www.nagios.org/">Nagios</a>.  Monitoring includes the check if your site is up and running, check for new updates on Drupal core, security, and modules, database updates, write permission on &#8220;files&#8221; directory,  check if cron is running on the specified period, and other sections of your Drupal site.  It is intended and helpful to those maintain large number of Drupal sites.</p>

<p>At this time of writing, this module is still on a development version and there&#8217;s no guarantee that the installation guide will work out-of-the-box with your system.  And this post will mainly cover my own installation process on our Nagios monitoring server running on Debian and Nagios version 3.0, and Drupal version 6.x sites on web servers running CentOS 5.x.</p>

<p><strong>Installation</strong>:
My installation is based on the included README file and with some adjustments to my liking.</p>

<p><strong>Install the Drupal Module:</strong></p>

<ul>
<li><p>Download the Nagios module from <a href="http://drupal.org/project/nagios">Drupal project page</a>.</p></li>
<li><p>Install the module to your Drupal site just like the other modules.  Download tarball, extract to modules directory ex: <strong><em>sites/all/modules/</em></strong>, go to <strong><em>admin->build->modules</em></strong> and enable the module.</p></li>
<li><p>Configure your Nagios module and set the site&#8217;s UniqueID and Cron duration.</p></li>
</ul>


<p><strong>UniqueID</strong> is your site identifier to be used by the Nagios (<em>check_drupal</em>) to authorize the service check and for security purposes.  The author also suggests the use of MD5 or SHA1 string. Refer to README for more info on this parameter.</p>

<p><strong>Cron Duration</strong> - you need to supply the interval of your cron job that checks for Drupal updates.  This value should match with your cron settings, ex: daily or every 3 hours..etc.</p>

<p><strong>Configure Nagios checks:</strong></p>

<ul>
<li>Copy the plugin file (<strong><em>check_drupal</em></strong>) found on the <strong><em>nagios-plugin</em></strong> directory of the module, to your Nagios plugins directory where the other Nagios check commands are located - in my case it&#8217;s on <strong><em>/usr/local/nagios/libexec/</em></strong> (CentOS).</li>
</ul>


<p>If your Nagios installation is on a different machine than your Drupal server, you need to copy the <em><strong>check_drupal</strong></em> file in there.  You can also put it on the same server with Drupal sites and use NRPE instead.</p>

<p>On my CentOS machine i received an error on <strong><em>check_drupal</em></strong> regarding the location of <em><strong>basename</strong></em> file - it&#8217;s on <em><strong>/bin/basename</strong></em>.  You can edit the <em><strong>check_drupal</strong></em> file directly to adjust the path to <em><strong>basename</strong></em>.
<code>./check_drupal: line 14: /usr/bin/basename: No such file or directory.</code></p>

<ul>
<li><strong>Add command, host, hostgroup, and service definition:</strong></li>
</ul>


<p><strong>Command </strong>(commands.cfg):  I made small modification on the given commands from the README file to match my setup.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>define command{
</span><span class='line'>command_name  check_drupal
</span><span class='line'>command_line  $USER1$/check_drupal -H $ARG1$ -U $ARG2$ -t $ARG3$
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p><strong>HostGroup</strong>:  I created a new Host group because we have other service checks on our server such as SSH, HTTP, LOAD, etc and I want to separate my checks for Drupal sites.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>define hostgroup {
</span><span class='line'>hostgroup_name  Drupal
</span><span class='line'>alias           Drupal Sites
</span><span class='line'>members         MyWebServer
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p><strong>Host:</strong> I defined new host for Drupal sites so i can configure and group my them on the same host where they belong.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>define host {
</span><span class='line'>host_name                      MyWebServer
</span><span class='line'>display_name                   MyWebServer
</span><span class='line'>address                        HOSTNAME/IP ADDRESS HERE
</span><span class='line'>hostgroups                     Drupal
</span><span class='line'>check_command                  check-host-alive
</span><span class='line'>contact_groups                 Admins
</span><span class='line'>check_period                   24x7
</span><span class='line'>max_check_attempts             10
</span><span class='line'>notification_interval          480
</span><span class='line'>notification_period            24x7
</span><span class='line'>notification_options           d,r
</span><span class='line'>notifications_enabled          1
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p><strong>Service:</strong> Below is my service checks definition for checking Drupal sites, i only need to copy this and change supply parameters for domain, unique key and the timeout.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>define service {
</span><span class='line'>service_description            DRUPAL_SITE 1
</span><span class='line'>host_name                      MyWebServer
</span><span class='line'>check_period                   24x7
</span><span class='line'>max_check_attempts             3
</span><span class='line'>normal_check_interval          5
</span><span class='line'>retry_check_interval           3
</span><span class='line'>contact_groups                 Admins
</span><span class='line'>notification_interval          480
</span><span class='line'>notification_period            24x7
</span><span class='line'>notification_options           w,u,c,r
</span><span class='line'>check_command                  check_drupal!mysite.example.com!mykeyhere!5
</span><span class='line'>notifications_enabled          1
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>If your installation and configuration is correct you will get the Nagios service status similar below.  It indicates number of modules, themes, users, nodes, etc.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>DRUPAL OK, ADMIN:OK, CRON:OK
</span><span class='line'>SAN=0;SAU=0;NOD=12;USR=7;MOD=23;THM=9</span></code></pre></td></tr></table></div></figure>


<p>On my initial tests i received Nagios status (below) different than the above info and it was caused by my Apache configuration because i have a default Nagios installation before on my server that hosts my Drupal sites.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>HTTP returned an error code. HTTP:   HTTP/1.1 301 Moved Permanently</span></code></pre></td></tr></table></div></figure>


<p>So you need to check first the url of your Nagios module installation ex:  http://mysamplesite.com/nagios/, this will give you:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Nagios status page
</span><span class='line'>nagios=UNKNOWN, DRUPAL:UNKNOWN=Unauthorized</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/12/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/10/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2012/11/howto-bulk-import-dns-zones-to-softlayer-dns-using-cpanel/">HowTo: Bulk Import DNS Zones to Softlayer DNS using Cpanel</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/integrate-sendgrid-with-redmine/">Integrate Sendgrid with Redmine</a>
      </li>
    
      <li class="post">
        <a href="/2012/07/rsback-task-x-is-locked-and-cannot-be-executed/">rsback: task x is locked and cannot be executed</a>
      </li>
    
      <li class="post">
        <a href="/2012/06/restore-xen-vm-from-lvm-snapshot-backups/">Restore Xen VM from LVM Snapshot Backups</a>
      </li>
    
      <li class="post">
        <a href="/2012/06/debian-6-backup-xen-with-lvm-and-rsnapshot/">Debian 6: Backup Xen with LVM and Rsnapshot</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/promet">@promet</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'promet',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("linuxsysadmnblg", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/linuxsysadmnblg" class="twitter-follow-button" data-show-count="false">Follow @linuxsysadmnblg</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Promet OPS Team -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'linuxsysadminblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
